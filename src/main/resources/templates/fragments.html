<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns="http://www.w3.org/1999/html">
<head>
    <meta charset="UTF-8">
    <title>Thymeleaf fragments</title>
</head>
<body>

<!--Login-->

<div th:fragment="login">
    <br/>
    <h3 class="tab-title">Login page</h3>
    <br/>
    <!--/*@thymesVar id="loginError" type="java"*/-->
    <p th:if="${loginError}" class="alert">Wrong username or password</p>
    <form th:action="@{/login}" method="post">
        <label for="username">Username</label>:
        <input type="text" id="username" name="username" autofocus="autofocus"/> <br/>
        <label for="password">Password</label>:
        <input type="password" id="password" name="password"/> <br/>
        <br/>
        <input type="submit" value="Log in"/>
    </form>
    <br/>
    <button class="my-button" onclick="location.href = '/wl/register'" type="button">Register</button>
</div>

<!--Display on successful logout-->

<div th:fragment="logout-success">
    <br/>
    <h3 class="tab-title">Logout page</h3>
    <br/>
    <p class="alert">Logout successful!</p>
    <form th:action="@{/login}" method="get">
        <input type="submit" value="OK"/>
    </form>
</div>

<!--Display on unsuccessful logout-->

<div th:fragment="logout-failure">
    <br/>
    <h3 class="tab-title">Logout page</h3>
    <br/>
    <p class="alert">Logout error, please try again!</p>
    <form th:action="@{/user}" method="get">
        <input type="submit" value="OK"/>
    </form>
</div>

<!--User details edition-->
<!--This form is used for new user registration and existing user details edition-->

<div th:fragment="edit-user-details">
    <!--/*@thymesVar id="topMessage" type="java"*/-->
    <h2 th:text="${topMessage}"></h2><br/>
    <!--/*@thymesVar id="user" type="java"*/-->
    <form th:action="@{/saveuser}" th:object="${user}" method="post">
        <input type="hidden" th:field="*{id}"/>
        <p>Username: <input type="text" th:field="*{name}" autofocus="autofocus"/>
            <span th:if="${#fields.hasErrors('name')}" class="alert" th:errors="*{name}"></span></p>
        <p>Password: <input type="password" th:field="*{password}"/>
            <span th:if="${#fields.hasErrors('password')}" class="alert" th:errors="*{password}"></span></p>
        <p>Confirm password: <input type="password" th:field="*{confirmPassword}"/>
            <span th:if="${#fields.hasErrors('confirmPassword')}" class="alert" th:errors="*{confirmPassword}"></span></p>
        <p>Email: <input type="text" th:field="*{email}"/>
            <span th:if="${#fields.hasErrors('email')}" class="alert" th:errors="*{email}"></span></p>
        <p><input type="checkbox" th:field="*{realEmail}" th:value ="false"/>
            <span>This is a real email, please send me an activation message</span></p>
        <p>First name: <input type="text" th:field="*{firstName}"/></p>
        <p>Surname: <input type="text" th:field="*{lastName}"/></p>
        <p>Age: <input class="centered" type="number" th:field="*{age}"/></p>
        <p>Female: <input type="radio" th:field="*{gender}" th:value="false" th:checked="0"/>
            Male: <input type="radio" th:field="*{gender}" th:value="true" th:checked="0"/></p>
        <input type="hidden" th:field="*{role}"/>
        <!--/*@thymesVar id="buttonText" type="java"*/-->
        <input type="submit" th:value="${buttonText}">
        <button class="my-button" onclick="location.href='/wl/login'" type="button">Cancel</button>
    </form>
</div>

<!--User details edition successful-->

<div th:fragment="edit-user-success">
    <br/><h2>User details saved to database!</h2><br/>
    <button class="my-button" onclick="location.href='/wl/login'" type="button">OK</button>
</div>

<!--User panel-->

<div th:fragment="user-panel">
    <div class="workout-content">
                <h2>Select existing workout from the panel to the right or...</h2>
                <button class="my-button" onclick="location.href='/wl/newworkout'" type="button">
                    Add new workout</button>
    </div>
    <div class="workout-selection">
        <div class="controls">
            <!--/*@thymesVar id="userGreeting" type="java"*/-->
            <p class="same-row" th:text="${userGreeting}"></p>
            <button class="same-row my-button" onclick="location.href='/wl/logout'" type="button">Log out</button>
            <button class="same-row my-button" onclick="location.href='/wl/edituserdetails'" type="button">My profile</button>
            <!--/*@thymesVar id="adminRights" type="java"*/-->
            <button th:if="${adminRights}" class="same-row my-button" onclick="location.href='/wl/admin'">Admin panel</button>
        </div>
    </div>
</div>

<!--Admin panel-->

<div th:fragment="admin-panel">
    <div class="controls">
        <!--/*@thymesVar id="adminGreeting" type="java"*/-->
        <p class="same-row" th:text="${adminGreeting}"></p>
        <button class="same-row my-button" onclick="location.href='/wl/logout'" type="button">Log out</button>
        <button class="same-row my-button" onclick="location.href='/wl/edituserdetails'" type="button">My profile</button>
        <button class="same-row my-button" onclick="location.href='/wl/login'" type="button">Back</button>
    </div>
    <h2>Welcome, Admin!</h2>
</div>
</body>
</html>